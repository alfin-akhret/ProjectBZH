<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Labs</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
        #map-canvas {width:100%; height:500px;}
    </style>
</head>
<body>
    
    <div id="map-canvas"></div>
    
    
    <script type="text/javascript">
        function initialize(){
            var latLng = new google.maps.LatLng(-6.2297465,106.829518);
            var mapOptions = {
                center: latLng,
                zoom: 18
            }
            
            var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
            setMarkers(map, taps);
            
        }
        

        // TAP object declaration and initialization
        var taps = [
              ['tap1', -6.2293465,106.829518, 3],
              ['tap2', -6.2296700,106.829518, 3],
              ['tap3', -6.2299900,106.829518, 3]
            ];
            
        // Cable object declaration and initialization    
        var cables = [
            new google.maps.LatLng(-6.2293465,106.829518),
            new google.maps.LatLng(-6.2296700,106.829518),
            new google.maps.LatLng(-6.2299900,106.829518)
        ];
            
        function setMarkers(map, locations){
            // icons
            // TODO : this should be from local file
            var iconImg = "http://www.kh-uia.org.il/PublishingImages/calendar-blue-circle.png";
            
            // for each tap in taps
            // place new marker on the map
            for (var i = 0; i < taps.length; i++){
                var myLatLng = new google.maps.LatLng(locations[i][1], locations[i][2]);
                var marker = new google.maps.Marker({
                   position: myLatLng,
                   map: map,
                   icon:iconImg
                });
                
                
            }
            
            // place the cable troudh markers
            var cablePath = new google.maps.Polyline({
                path: cables,
                geodesic: true,
                strokeColor: 'blue',
                strokeOpacity: 1.0,
                strokeWeight: 3,
                map:map
            });
        }
        
        // create map on window load
        google.maps.event.addDomListener(window, 'load', initialize);
        
        /**
         * 
         * float[] results = new float[1];
Location.distanceBetween(oldPosition.latitude, oldPosition.longitude,
                newPosition.latitude, newPosition.longitude, results); **/
        
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
    <script type="text/javascript" src="app/js/app.js"></script>
    <script type="text/javascript" src="app/js/services.js"></script>
    <script type="text/javascript" src="app/js/controllers.js"></script>
</body>
</html>